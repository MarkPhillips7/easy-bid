<section>
  <div class="container-fluid" data-ng-controller="templateLibraryDetails as vm">
    <div class="row">
      <div class="col-md-3">
        <h2>{{vm.templateLibrary.name}}</h2>

        <div class="eb-add-border">
          <h4>
            Product Hierarchy
          </h4>
          <abn-tree tree-data="vm.productHierarchyData"
                    tree-control="vm.productHierarchy"
                    on-select="vm.onItemSelected(branch)"
                    icon-leaf=""
                    icon-expand="fa fa-plus"
                    icon-collapse="fa fa-minus">
          </abn-tree>
        </div>
      </div>
      <div class="col-md-7">
        <ol class="breadcrumb">
          <li data-ng-repeat="breadcrumbItem in vm.breadcrumbItems"
              data-ng-class="breadcrumbItem.class">
            <a data-ng-if="breadcrumbItem.class !== 'active'" href=""
               ng-click="vm.selectTemplateId(breadcrumbItem.templateId)">{{breadcrumbItem.name}}</a>
            {{breadcrumbItem.class === 'active' ? breadcrumbItem.name : ''}}
          </li>
        </ol>

<!--        <select name="usageMode"
                ng-change="vm.usageModeChanged()"
                ng-model="vm.usageMode">
          <option value="{{$root.Constants.usageModes.browse}}">{{$root.Constants.usageModes.browse}}</option>
          <option value="{{$root.Constants.usageModes.autoSave}}">{{$root.Constants.usageModes.autoSave}}</option>
          <option value="{{$root.Constants.usageModes.classicEdit}}">{{$root.Constants.usageModes.classicEdit}}</option>
        </select>-->
        <!--moving the above 3 options to the button group below-->
        <div class="btn-group">
          <button type="button" class="btn btn-default btn-xs"
                  data-ng-enabled="vm.showModeOption($root.Constants.usageModes.browse)"
                  data-ng-click="vm.setUsageMode($root.Constants.usageModes.browse)"
                  tooltip="Browse Mode">
            <span class="fa-stack">
              <i class="fa fa-save fa-stack-1x"></i>
              <i class="fa fa-ban fa-stack-2x text-danger"></i>
            </span> Browse
          </button>
          <button type="button" class="btn btn-default btn-xs"
                                     data-ng-enabled="vm.showModeOption($root.Constants.usageModes.autoSave)"
                                     data-ng-click="vm.setUsageMode($root.Constants.usageModes.autoSave)"
                                     tooltip="Auto Save">
            <span class="fa-stack">
              <i class="fa fa-save fa-stack-1x"></i>
              <i class="fa fa-rotate-right fa-stack-2x text-success"></i>
            </span> Auto Save
          </button>
          <button type="button" class="btn btn-default btn-xs"
                                   data-ng-enabled="vm.showModeOption($root.Constants.usageModes.classicEdit)"
                                   data-ng-click="vm.setUsageMode($root.Constants.usageModes.classicEdit)"
                                   tooltip="Classic Edit (must click Save before changes take effect)">
            <span class="fa-stack">
              <i class="fa fa-save fa-stack-1x"></i>
              <i class="fa fa-mouse-pointer fa-stack-2x text-info"></i>
            </span> Classic Edit
          </button>
        </div>

        <div class="btn-group pull-right">
          <button type="button" class="btn btn-default btn-xs"
                  data-ng-show="vm.showOption($root.Constants.recordActions.add)"
                  data-ng-click="vm.addTemplateAndEditDetails()"
                  tooltip="Add">
            <i class="fa fa-plus"></i> Add
          </button>
          <button type="button" class="btn btn-default btn-xs"
                  data-ng-show="vm.showOption($root.Constants.recordActions.copy, vm.selectedTemplate)"
                  data-ng-click="vm.addTemplateAndEditDetails(vm.selectedTemplate)"
                  tooltip="Copy">
            <i class="fa fa-copy"></i> Copy
          </button>
          <button type="button" class="btn btn-default btn-xs"
                  data-ng-show="vm.showOption($root.Constants.recordActions.edit, vm.selectedTemplate)"
                  data-ng-click="vm.editTemplateDetails(vm.selectedTemplate)"
                  tooltip="Edit">
            <i class="fa fa-edit"></i> Edit
          </button>
          <button type="button" class="btn btn-default btn-xs"
                  data-ng-show="vm.showOption($root.Constants.recordActions.delete, vm.selectedTemplate)"
                  data-ng-click="vm.deleteTemplate(vm.selectedTemplate)"
                  tooltip="Delete">
            <i class="fa fa-times"></i> Delete
          </button>
          <button type="button" class="btn btn-default btn-xs"
                  data-ng-show="vm.showOption($root.Constants.recordActions.save, vm.selectedTemplate)"
                  data-ng-click="vm.save()"
                  tooltip="Save">
            <i class="fa fa-save"></i> Save
          </button>
          <button type="button" class="btn btn-default btn-xs"
                  data-ng-show="vm.showOption($root.Constants.recordActions.cancel, vm.selectedTemplate)"
                  data-ng-click="vm.cancel()"
                  tooltip="Cancel">
            <i class="fa fa-cancel"></i> Cancel
          </button>
        </div>

        <h4>
          {{vm.selectedTemplate.name}}
          <label class="pull-right">HasChanges
            <input type="checkbox" ng-model="vm.hasChanges">
          </label>
        </h4>
        <eb-template-details-view
            data-ng-if="vm.recordAction == $root.Constants.recordActions.view"
            data-template-library="vm.templateLibrary"
            data-template="vm.selectedTemplate">
        </eb-template-details-view>
        <eb-template-details-edit
            data-ng-if="vm.recordAction == $root.Constants.recordActions.edit"
            data-template-library="vm.templateLibrary"
            data-vm="vm"
          data-template="vm.selectedTemplate">
        </eb-template-details-edit>
        <eb-relevant-templates-view
            data-vm="vm"
            data-template-library="vm.templateLibrary"
            data-template="vm.selectedTemplate"
            data-relevant-template-types-with-templates="vm.relevantTemplateTypesWithTemplates">
        </eb-relevant-templates-view>
      </div>
      <div class="col-md-2">
        <h2>Variables</h2>
        <h4 class="sub-header">
          Key
          <br/>
          <span class="label label-success label-spaced">Defined here</span>
          <span class="label label-default label-spaced">Defined above</span>
          <!--<span class="label label-warning label-spaced">Defined below</span>-->
          <span class="label label-danger label-spaced">Not defined</span>
          <span class="label label-primary label-spaced">Override</span>
          <br/>
          <br/>

          Variables
          <br/>
          <span data-ng-repeat="variable in vm.variablesSorted" ng-class="variable.labelClass" class="label-spaced">
            {{variable.variableName}}
          </span>
        </h4>
      </div>
    </div>
  </div>
</section>